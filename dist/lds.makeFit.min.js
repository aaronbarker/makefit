/*!
 * makeFit
 * @description	Makes and element fit into it
 * @version		1.2.1 - 2013/10/08
 * @author		Aaron Barker
 * @requires	ui.widget.js
 * @copyright	Copyright Intellectual Reserve Inc. All rights reserved.
 */
(function(a){"use strict";a.widget("lds.makeFit",{options:{overlayID:"gallery-overlay",sizeClasses:"small smaller smallest",sync:"",imgLoadTimeout:100,setupResize:function(b,c){a(window).on("resize orientationchange",function(){c.fit()})}},_create:function(){var a=this.options,b=this,c=this.element,d;if(typeof a.fitWithin==="function"){b.fitWithin=a.fitWithin.call(this,b)}else{b.fitWithin=a.fitWithin||c.parent()}d=b.fitWithin;b._trigger("setupResize",0,b);b.fit();c.addClass("makeFit-enabled")},fit:function(){var b=this.options,c=this,d=this.element,e=c.fitWithin,f=e.height(),g,h=b.sizeClasses.split(" "),i,j,k,l;if(e.is("img")&&!e.height()){setTimeout(function(){c.fit()},b.imgLoadTimeout);return}d.add(e).removeClass(b.sizeClasses);a.each(h,function(){f=e.height();g=e.width();i=Math.floor(d.outerHeight(true));j=Math.floor(d.outerWidth(true));if(i>f||j>g){d.add(e).addClass(""+this)}});if(b.center&&d.css("position")==="absolute"){k=(f-i)/2;d.css("top",k)}else if(b.center){d.css("top","auto")}if(b.sync){l=a(b.sync);if(l.index(d)===l.length-1){a.each(h,function(){if(l.hasClass(""+this)){l.addClass(""+this)}})}}},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);a(this.element).add(window).unbind("."+this.widgetName)}});a.extend(a.lds.makeFit,{version:"1.2.1"})})(jQuery);